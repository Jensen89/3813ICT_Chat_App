<!-- src/app/components/channels/channels.component.html -->
<div class="channels-container">
  <!-- Header -->
  <div class="header">
    <h1>{{ group?.name }} - Channels</h1>
    <button (click)="goBack()" class="btn-back">Back to Groups</button>
  </div>

  <!-- Messages -->
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

  <!-- Create Channel Section (Group Admins only) -->
  <div class="create-section" *ngIf="canManageChannels()">
    
    <button *ngIf="!showCreateForm" (click)="showCreateForm = true" class="btn-primary">
      Create New Channel
    </button>
    
    <div *ngIf="showCreateForm" class="create-form">
      <h3>Create New Channel</h3>
      <input 
        type="text" 
        [(ngModel)]="newChannelName" 
        placeholder="Enter channel name"
        (keyup.enter)="createChannel()">
      <div class="form-buttons">
        <button (click)="createChannel()" class="btn-primary">Create</button>
        <button (click)="showCreateForm = false; newChannelName = ''" class="btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Channels List -->
  <div class="channels-list">
    <h2>Channels</h2>
    
    <div *ngIf="channels.length === 0" class="no-channels">
      <p>No channels have been created in this group yet.</p>
      <p *ngIf="canManageChannels()">Create the first channel using the button above!</p>
    </div>
    
    <div class="channels-grid">
      <div class="channel-card" *ngFor="let channel of channels">
        <div class="channel-header">
          <h3># {{ channel.name }}</h3>
          <span class="member-count">{{ getMemberCount(channel) }} members</span>
        </div>
        
        <div class="channel-status">
          <span *ngIf="isMemberOfChannel(channel)" class="member-badge">
            ✅ You're a member
          </span>
          <span *ngIf="!isMemberOfChannel(channel)" class="not-member-badge">
            ❌ Not a member
          </span>
        </div>
        
        <div class="channel-actions">
          <!-- Join Channel -->
          <button 
            *ngIf="!isMemberOfChannel(channel)" 
            (click)="joinChannel(channel)" 
            class="btn-primary">
            Join Channel
          </button>
          
          <!-- Enter Chat (for members) -->
          <button 
            *ngIf="isMemberOfChannel(channel)" 
            (click)="navigateToChat(channel.id)" 
            class="btn-primary">
            Enter Chat (Phase 2)
          </button>
          
          <!-- Leave Channel -->
          <button 
            *ngIf="isMemberOfChannel(channel)" 
            (click)="leaveChannel(channel)" 
            class="btn-warning">
            Leave Channel
          </button>
          
          <!-- Admin Actions -->
          <button 
            *ngIf="canManageChannels()" 
            (click)="deleteChannel(channel)" 
            class="btn-danger">
            Delete Channel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>